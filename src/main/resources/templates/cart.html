<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}"></head>

<body>
<!-- Navbar -->
<div th:replace="~{fragments/header :: body}"></div>

<div class="container mt-5">
  <h2 class="text-center mb-4">Your Cart</h2>

  <!-- Cart Table -->
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Book Title</th>
        <th scope="col">Author</th>
        <th scope="col">Price</th>
        <th scope="col">Quantity</th>
        <th scope="col">Total</th>
        <th scope="col">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="item, iterStat : ${cartItems}">
        <th scope="row" th:text="${iterStat.index + 1}"></th>
        <td th:text="${item.book.title}"></td>
        <td th:text="${item.book.author}"></td>
        <td th:text="${item.book.price}"></td>
        <td>
          <input type="number" class="form-control" th:value="${item.quantity}" min="1" />
        </td>
        <td th:text="${item.book.price * item.quantity}"></td>
        <td>
          <a href="#" class="btn btn-danger btn-sm">Remove</a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Cart Summary -->
  <div class="d-flex justify-content-end">
    <div class="card p-3" style="width: 18rem;">
      <h5 class="card-title">Cart Summary</h5>
      <p class="card-text">
        <strong>Total Items: </strong><span th:text="${totalItems}"></span><br>
        <strong>Total Price: </strong><span th:text="${totalPrice}"></span>
      </p>
      <a href="/checkout" class="btn btn-primary">Proceed to Checkout</a>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
